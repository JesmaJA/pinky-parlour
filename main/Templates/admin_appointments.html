{% extends "admin_base.html" %}

{% block admin_content %}
<h2>Manage Appointments</h2>

<table class="table table-bordered table-striped">
  <thead>
    <tr>
      <th>ID</th>
      <th>Name</th>
      <th>Email</th>
      <th>Phone</th>
      <th>Service</th>
      <th>Date</th>
      <th>Time</th>
      <th>Status</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for appt in appointments %}
    <tr>
      <td>{{ appt.id }}</td>
      <td>{{ appt.name }}</td>
      <td>{{ appt.email }}</td>
      <td>{{ appt.phone }}</td>
      <td>{{ appt.service.name }}</td>
      <td>{{ appt.date }}</td>
      <td>{{ appt.time }}</td>
      <td>{{ appt.status }}</td>
      <td>
        {% if appt.status != 'Approved' %}
        <a href="{% url 'approve_appointment' appt.id %}" class="btn btn-success btn-sm">Approve</a>
        {% endif %}
        {% if appt.status != 'Rejected' %}
        <a href="{% url 'reject_appointment' appt.id %}" class="btn btn-danger btn-sm">Reject</a>
        {% endif %}
        <a href="{% url 'delete_appointment' appt.id %}" 
           class="btn btn-warning btn-sm"
           onclick="return confirm('Are you sure you want to delete this appointment?');">
           Delete
        </a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
